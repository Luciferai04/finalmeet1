global:
 scrape_interval: 15s
 evaluation_interval: 15s

rule_files:
 # - "first_rules.yml"
 # - "second_rules.yml"

scrape_configs:
 - job_name: 'prometheus'
 static_configs:
 - targets: ['localhost:9090']

 - job_name: 'gradio-app'
 static_configs:
 - targets: ['gradio:7860', 'gradio:7861', 'gradio:7862']
 metrics_path: '/metrics'
 scrape_interval: 30s

 - job_name: 'flask-api'
 static_configs:
 - targets: ['flask:5000', 'flask:5001', 'flask:5002']
 metrics_path: '/metrics'
 scrape_interval: 15s

 - job_name: 'nginx'
 static_configs:
 - targets: ['nginx:9113']
 scrape_interval: 30s

 - job_name: 'redis'
 static_configs:
 - targets: ['redis:6379']
 scrape_interval: 30s

 - job_name: 'postgres'
 static_configs:
 - targets: ['postgres:5432']
 scrape_interval: 30s

 # Docker containers monitoring
 - job_name: 'cadvisor'
 static_configs:
 - targets: ['cadvisor:8080']
 scrape_interval: 30s

alerting:
 alertmanagers:
 - static_configs:
 - targets:
 # - alertmanager:9093
